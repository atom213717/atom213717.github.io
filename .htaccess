RewriteEngine On
RewriteCond %{REQUEST_URI} !^/maintenance.html$
RewriteCond %{REQUEST_URI} !^/login.php$
RewriteCond %{REQUEST_URI} !^/admin.php$
RewriteCond %{DOCUMENT_ROOT}/maintenance.flag -f
RewriteRule ^(.*)$ /maintenance.html [R=302,L]